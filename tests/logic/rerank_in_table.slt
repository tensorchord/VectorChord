statement ok
CREATE TABLE t_singlecolumn (id integer, val vector(3));

statement ok
INSERT INTO t_singlecolumn (id, val) SELECT id, ARRAY[id, id, id]::real[] FROM generate_series(1, 10000) s(id);

statement ok
CREATE INDEX ON t_singlecolumn USING vchordrq (val vector_l2_ops)
WITH (options = $$
residual_quantization = false
rerank_in_table = true
[build.internal]
lists = []
$$);

statement ok
SET vchordrq.probes = '';

query I
SELECT id FROM t_singlecolumn ORDER BY val <-> '[1.9, 1.9, 1.9]' limit 9;
----
2
1
3
4
5
6
7
8
9

statement ok
DROP TABLE t_singlecolumn;

statement ok
CREATE TABLE t_multicolumn (id integer);

statement ok
INSERT INTO t_multicolumn (id) SELECT id FROM generate_series(1, 10000) s(id);

statement ok
CREATE INDEX ON t_multicolumn USING vchordrq ((ARRAY[id::real, id::real, id::real]::vector(3)) vector_l2_ops)
WITH (options = $$
residual_quantization = false
rerank_in_table = true
[build.internal]
lists = []
$$);

statement ok
SET vchordrq.probes = '';

query I
SELECT id FROM t_multicolumn ORDER BY ARRAY[id::real, id::real, id::real]::vector(3) <-> '[1.9, 1.9, 1.9]' limit 9;
----
2
1
3
4
5
6
7
8
9

statement ok
DROP TABLE t_multicolumn;
